name: "Final Cross Build (Pure Spaces)"

on:
  push:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  build_termux:
    name: "Build for Termux"
    runs-on: "ubuntu-latest"
    
    steps:
      - uses: "actions/checkout@v4"
      
      - name: "Install Rust and Target"
        uses: "dtolnay/rust-toolchain@stable"
        with:
          targets: "aarch64-linux-android"
          
      - name: "Clean and Build Binary"
        
        run: |
          cross build --release --target aarch64-linux-android
          
        # 强制空行隔离 Block Scalar
        
        continue-on-error: "false" 
        
      - name: "Upload Artifact"
        uses: "actions/upload-artifact@v4"
        with:
          name: "cyber_lookup_aarch64"
          path: "target/aarch64-linux-android/release/cyber_lookup"
          retention-days: "7"
